## 技术选型
- 后端：Python  + Django  + Django REST Framework (DRF)
- 前端：Vue 3 +  Axios + Vite + Vue Router
- 数据库：MySQL 
- ORM：Django ORM
## 文件结构
~~~
frontend/                    # 前端
└─ meeting-frontend/

media/                       # ⭐ 图片存放
└── rooms/      

meeting_system/              # 后端
├─ meeting_system/
│ ├─ settings.py             # 核心配置文件
│ ├─ urls.py                 # 主路由配置文件
│ └─ wsgi.py
├─ users/					 # 用户 app
├─ rooms/                    # 会议室 app
├─ reservations/             # 预定 app
└─ manage.py                 # Django 命令行工具入口
~~~
## 设计说明

### 普通用户
前端与后端之间通过请求交互，通用接口返回格式：
```json
{
  "code": 0,
  "msg": "ok",
  "data": {}
}
```

| 字段   | 说明          |
| ---- | ----------- |
| code | 0 成功，非 0 失败 |
| msg  | 给前端弹窗用      |
| data | 实际数据        |
#### 登录
##### 登录请求
###### 请求格式
- `POST /api/auth/login/`
- 参数 `username` `password`
	- 用户名和密码。
- 成功返回值 `access` `refresh`
	- 这两个字段用于 `JWT` 鉴权。后续请求需在 Header 中携带 `Authorization: Bearer <access>` 。
###### 附加说明
- 代码位置 `meeting_system/users/views.py`
- 账号由管理员在后台手动添加，使用 Django 自带 `User` 模型及权限体系。
- 普通用户与管理员共用用户表，通过权限区分
- ==可继续补充 JWT 相关==
###### 失败情形
- 没有 `username` 和 `password` 对应的用户 -> `用户名或密码错误`
- 管理员账号登录普通用户入口 -> `管理员账户禁止登录`
##### 刷新 `access`
###### 请求格式
- `POST /api/token/refresh/`
- 参数 `refresh`
- 成功返回值 `access`
###### 附加说明
- 代码位置 `meeting_system/meeting_system/urls.py `
- `access` 有效期 30 分钟。 `refresh` 有效期 7 天。
#### 会议室相关

##### 获取可用会议室列表
###### 请求格式
- `GET /api/rooms/list/`
- 返回所有的会议室列表
###### 附加说明
- 代码位置 `meeting_system/rooms/views.py`
#### 预定相关
1. 接口不能成功转换请求中的**所有**参数会返回 `参数格式错误`
2. 接口对请求中的时间参数有统一的初步检验。`validate_date_and_time(reserve_date, start_hour, end_hour)`
	- 包含以下错误：`预约日期不能早于今天` 、`小时必须在 0-24 范围内`、 `结束时间必须晚于开始时间`、 `当天预约开始时间不能早于当前时间`
3. 遇到其他错误返回 `服务器内部错误`
代码位于 `meeting_system/reservations/views.py`
##### 查询可用会议室
###### 请求格式
- `POST /api/reservations/check/`
- 参数：
    - `date`：预约日期（`YYYY-MM-DD`）
    - `start_hour`：开始小时（整数，0–23）
    - `end_hour`：结束小时（整数，1–24）
    - `people`：参会人数
###### 成功返回
- 符合条件的会议室列表
###### 附加说明
- 时间以 **1 小时为最小单位**
- 只能选择 **同一天连续小时**
- 自动排除：
    - 人数不足的会议室
    - 时间段已被占用的会议室
    - 不可预约的会议室
###### 失败情形
- 日期为空 → `日期不能为空`
- 人数 ≤ 0 → `参会人数必须大于 0`
##### 创建预约
###### 请求格式
- `POST /api/reservations/create/`
- 参数：
    - `room_id`：会议室 ID
    - `date`：预约日期
    - `start_hour`：开始小时
    - `end_hour`：结束小时
    - `people`：参会人数
    - `topic`：会议主题
###### 成功返回
- 提示信息：`预约提交成功，等待审批`
###### 附加说明
- 用户身份从 `JWT` 中获取
- 原子性操作
- 新建预约状态固定为 `PENDING（审核中）`
- 创建时系统会再次校验：
    - 时间冲突
    - 人数是否超出会议室容量
    - 会议室是否仍可预约
###### 失败情形
- 会议室不存在或不可预约 → `会议室不存在或不可用`
- 时间段冲突 → `该时间段已被占用`
- 人数超出容量 → `会议室容量不足`
- 缺少某个参数 → `缺少参数: {}`

##### 查询我的预约记录
###### 请求格式
- `POST /api/reservations/my/`
- 无参数
###### 成功返回
- 当前用户的所有预约记录，包括：
    - `PENDING`：审核中
    - `APPROVED`：已通过
    - `REJECTED`：已驳回
    - `CANCELED`：已取消
    - `USED`：已使用
- 每条记录包含：
    - 会议室
    - 日期
    - 时间段
    - 状态
    - 审批时间
    - 驳回原因（如有）
###### 附加说明
- 返回结果按时间倒序
###### 失败情形
- 用户未登录 → `401 未认证`
##### 取消预约
###### 请求格式
- `POST /api/reservations/{id}/cancel`
- 路径参数：
    - `id`：预约 ID
###### 成功返回
- 提示信息：`预约已取消`
###### 附加说明
- 仅预约创建者可取消
- 不需要审批
- 允许取消状态：
    - `PENDING`
    - `APPROVED`
###### 失败情形
- 非本人操作 → `无权取消此预约`
- 状态不可取消（如 USED）→ `当前状态不可取消`
- 预约不存在 → `预约记录不存在`
##### 确认使用

###### 请求格式
- `POST /api/reservations/{id}/confirm`
- 路径参数：
    - `id`：预约 ID
###### 成功返回
- 提示信息：`已确认使用会议室`
###### 附加说明
- 仅预约创建者可操作
- 仅限 `APPROVED` 状态
- 只能在会议开始时间 **前后 1 小时内** 确认
###### 失败情形
- 非本人操作 → `无权确认使用此预约`
- 状态非已审批 → `只有已通过的预约才能确认使用`
- 不在允许时间窗口 → `不在允许确认使用的时间范围内`
### 管理员
