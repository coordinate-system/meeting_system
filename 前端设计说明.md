# 前端设计说明（Meeting Frontend）

## 一、前端技术选型

* **框架**：Vue 3
* **构建工具**：Vite
* **HTTP 请求**：Axios
* **路由管理**：Vue Router
* **状态管理**：无独立状态库（通过本地存储 + 组件状态管理）
* **鉴权方案**：JWT（Access Token + Refresh Token）
* **样式方案**：原生 CSS（全局样式 + 组件样式）

> 本项目为课程实践项目，前端未引入 Vuex / Pinia 等状态管理库，而是通过 `localStorage` + Axios 拦截器实现登录态管理，结构清晰、便于理解。

---

## 二、前端项目结构说明

```
meeting-frontend/
├── package.json                 # 项目依赖与脚本配置
├── vite.config.js               # Vite 构建与代理配置
├── index.html                   # HTML 入口文件
└── src/
    ├── main.js                  # Vue 应用入口
    ├── App.vue                  # 根组件
    ├── style.css                # 全局样式
    │
    ├── router/
    │   └── index.js             # 前端路由配置
    │
    ├── utils/
    │   ├── request.js           # Axios 封装（统一请求、JWT 处理）
    │   └── time.js              # 时间格式化工具
    │
    ├── api/                     # 后端接口封装
    │   ├── auth.js              # 登录 / 刷新 Token 接口
    │   ├── rooms.js             # 会议室相关接口
    │   └── reservations.js      # 预约相关接口
    │
    ├── views/                   # 页面组件
    │   ├── Login.vue            # 登录页面
    │   ├── UserLayout.vue       # 普通用户整体布局（导航 + 内容）
    │   ├── RoomList.vue         # 会议室列表页面
    │   ├── ReserveRoom.vue      # 预约筛选页面
    │   ├── ReserveConfirm.vue   # 预约确认页面
    │   └── MyReservations.vue   # 我的预约记录页面
    │
    └── assets/                  # 静态资源
        └── rooms/               # 会议室及登录页图片
```

---

## 三、整体架构设计

### 1️⃣ 前后端分离模式

* 前端仅负责：

  * 页面展示
  * 用户交互
  * 向后端发送请求并渲染返回数据
* 后端负责：

  * 业务逻辑
  * 权限校验
  * 数据库操作

前端与后端通过 **RESTful API + JSON** 进行通信，接口返回格式统一为：

```json
{
  "code": 0,
  "msg": "ok",
  "data": {}
}
```

---

## 四、路由设计说明（router/index.js）

### 路由结构

* `/login`：登录页面
* `/`：用户主布局（UserLayout）

  * `/rooms`：会议室列表
  * `/reserve`：会议室预约筛选
  * `/reserve/confirm`：预约确认
  * `/my-reservations`：我的预约记录

### 路由权限控制

* 登录成功后才允许访问用户页面
* 未登录用户访问受限路由时，自动跳转到 `/login`
* 判断依据：`localStorage` 中是否存在 `access token`

---

## 五、JWT 鉴权与请求封装设计

### 1️⃣ Axios 二次封装（utils/request.js）

前端对 Axios 进行统一封装，实现：

* 自动携带 `access token`
* 统一处理接口错误
* 统一处理 401 未认证情况

#### 请求拦截器

* 从 `localStorage` 读取 `access`
* 自动添加到请求头：

```
Authorization: Bearer <access>
```

#### 响应拦截器

* 若返回 401：

  * 尝试使用 `refresh token` 刷新 `access`
  * 刷新失败则清空登录信息并跳转登录页

---

### 2️⃣ Token 存储策略

* `access token`：

  * 存储在 `localStorage`
  * 每次请求自动携带
* `refresh token`：

  * 存储在 `localStorage`
  * 仅在 access 过期时使用

---

## 六、接口模块封装（api 目录）

前端按**业务模块**对接口进行拆分，避免在组件中直接书写请求逻辑。

### auth.js（认证相关）

* 登录
* 刷新 token
* 退出登录（前端清理本地状态）

### rooms.js（会议室相关）

* 获取会议室列表
* 展示会议室图片、容量、用途等信息

### reservations.js（预约相关）

* 查询可用会议室
* 创建预约
* 查询我的预约记录
* 取消预约
* 确认使用会议室

---

## 七、页面功能说明（views）

### 1️⃣ Login.vue（登录页面）

* 用户输入用户名与密码
* 调用登录接口 `/api/auth/login/`
* 登录成功：

  * 保存 access / refresh
  * 跳转用户主页
* 登录失败：

  * 弹窗显示后端返回的错误信息

---

### 2️⃣ UserLayout.vue（用户主布局）

* 提供统一页面框架：

  * 顶部导航
  * 页面内容区域
* 所有用户功能页面均在该布局下渲染

---

### 3️⃣ RoomList.vue（会议室列表）

* 获取并展示所有会议室
* 显示：

  * 图片
  * 名称
  * 房号
  * 容量
  * 是否可预约

---

### 4️⃣ ReserveRoom.vue（预约筛选页面）

* 用户选择：

  * 日期
  * 开始时间 / 结束时间
  * 参会人数
* 调用 `/api/reservations/check/`
* 展示符合条件的会议室列表

---

### 5️⃣ ReserveConfirm.vue（预约确认）

* 用户填写会议主题
* 确认预约信息
* 提交创建预约请求
* 成功后提示“预约提交成功，等待审批”

---

### 6️⃣ MyReservations.vue（我的预约记录）

* 查询当前用户的全部预约
* 按时间倒序显示
* 支持：

  * 取消预约
  * 确认使用（符合时间窗口）

---

## 八、前端与管理员功能的关系说明

* 管理员功能全部在 **Django Admin 后台**完成
* 前端仅提供 **普通用户操作界面**
* 普通用户无法：

  * 审批预约
  * 修改会议室状态
  * 创建管理员账号

---

## 九、前端设计特点总结

* 前后端职责清晰，接口边界明确
* 使用 JWT 实现无状态登录鉴权
* Axios 封装提高代码复用性
* 页面结构与业务模块高度一致
* 适合课程项目与后续功能扩展